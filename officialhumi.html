<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HUMI</title>
    <link rel="stylesheet" href="officialhumi.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/justgage@1.3.2/justgage.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-database.js"></script>
    <script>

        
        var firebaseConfig = {
        apiKey: "AIzaSyAdUaLQUuYG9pq0FAcAJUNrRxDAFhPdFfI",
        authDomain: "tes-01-b756c.firebaseapp.com",
        databaseURL: "https://tes-01-b756c-default-rtdb.firebaseio.com",
        projectId: "tes-01-b756c",
        storageBucket: "tes-01-b756c.appspot.com",
        messagingSenderId: "110783845354",
        appId: "1:110783845354:web:345fbbd24b48d5b8bad893"
        };

    
        // Initialize Firebase
            firebase.initializeApp(firebaseConfig);
        // Get a reference to the database service
        var database1 = firebase.database();
        var database2 = firebase.database();
        var database3 = firebase.database();
        var database4 = firebase.database();
        var database5 = firebase.database();
        var database6 = firebase.database();
        // Array to store temperature data
        var temperatures1 = [];
        var temperatures2 = [];
        var humidity1 = [];
        var humidity2= [];
        var Moisture1= [];
        var Moisture2= [];
        // Get the latest temperature from the database

        database1.ref("/SEN_1/TEM").on("value", function (snapshot) {
            temperatures1 = snapshot.val();
            updateChart();
            var gauge = new JustGage({
                id: "gauge",
                value: temperatures1,
                min: 0,
                max: 100,
                title: "Temperature1",
                label: "°C"
            });
        });

        database2.ref("/SEN_2/TEM").on("value", function (snapshot) {
            temperatures2 = snapshot.val();
            updateChart();
            var gauge = new JustGage({
                id: "gauge",
                value: temperatures2,
                min: 0,
                max: 100,
                title: "Temperature2",
                label: "°C"
            });
        });

        database3.ref("/SEN_1/HUM").on("value", function (snapshot) {
            humidity1 = snapshot.val();
            updateChart();
            var gauge = new JustGage({
                id: "gauge",
                value: humidity1,
                min: 0,
                max: 100,
                title: "humidity3",
                label: "%"
            });
        });
        database4.ref("/SEN_2/HUM").on("value", function (snapshot) {
            humidity2 = snapshot.val();
            updateChart();
            var gauge = new JustGage({
                id: "gauge",
                value: humidity2,
                min: 0,
                max: 100,
                title: "humidity3",
                label: "%"
            });
        });

        database5.ref("/SEN_3/MOI").on("value", function (snapshot) {
            Moisture1 = snapshot.val();
            updateChart();
            var gauge = new JustGage({
                id: "gauge",
                value: Moisture1,
                min: 0,
                max: 100,
                title: "humidity3",
                label: "%"
            });
        });
        
        database6.ref("/SEN_4/MOI").on("value", function (snapshot) {
            Moisture2 = snapshot.val();
            updateChart();
            var gauge = new JustGage({
                id: "gauge",
                value: Moisture2,
                min: 0,
                max: 100,
                title: "humidity3",
                label: "%"
            });
        });
        

        // Function to update the chart with the latest data
        function updateChart() {
            
        
            var ctx1_1 = document.getElementById('gauge1').getContext('2d');
            var gauge1 = new Chart(ctx1_1, {
                type: 'doughnut',
                data: {
                datasets: [{
                    data: [temperatures1, 100 - temperatures1],
                    backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)'
                    ],
                    borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)'
                    ],
                    borderWidth: 1
                }]
                },
                options: {
                rotation: 1 * Math.PI,
                circumference: 1 * Math.PI,
                cutoutPercentage: 90,
                tooltips: {
                    enabled: false
                },
                title: {
                    display: true,
                    text: temperatures1 + " °C",
                    fontSize: 40
                },

                }
            });

            var ctx1_2 = document.getElementById('gauge2').getContext('2d');
            var gauge2 = new Chart(ctx1_2, {
                type: 'doughnut',
                data: {
                datasets: [{
                    data: [humidity1, 100 - humidity1],
                    backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)'
                    ],
                    borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)'
                    ],
                    borderWidth: 1
                }]
                },
                options: {
                rotation: 1 * Math.PI,
                circumference: 1 * Math.PI,
                cutoutPercentage: 90,
                tooltips: {
                    enabled: false
                },
                title: {
                    display: true,
                    text: humidity1 + " °C",
                    fontSize: 40
                },

                }
            });

            var ctx2_1 = document.getElementById('gauge3').getContext('2d');
            var gauge3 = new Chart(ctx2_1, {
                type: 'doughnut',
                data: {
                datasets: [{
                    data: [temperatures2, 100 - temperatures2],
                    backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)'
                    ],
                    borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)'
                    ],
                    borderWidth: 1
                }]
                },
                options: {
                rotation: 1 * Math.PI,
                circumference: 1 * Math.PI,
                cutoutPercentage: 90,
                tooltips: {
                    enabled: false
                },
                title: {
                    display: true,
                    text: temperatures1 + " °C",
                    fontSize: 40
                },

                }
            });

            var ctx2_2 = document.getElementById('gauge4').getContext('2d');
            var gauge4 = new Chart(ctx2_2, {
                type: 'doughnut',
                data: {
                datasets: [{
                    data: [humidity2, 100 - humidity2],
                    backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)'
                    ],
                    borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)'
                    ],
                    borderWidth: 1
                }]
                },
                options: {
                rotation: 1 * Math.PI,
                circumference: 1 * Math.PI,
                cutoutPercentage: 90,
                tooltips: {
                    enabled: false
                },
                title: {
                    display: true,
                    text: humidity2 + " °C",
                    fontSize: 40
                },

                }
            });

            var ctx3 = document.getElementById('gauge5').getContext('2d');
            var gauge5 = new Chart(ctx3, {
                type: 'doughnut',
                data: {
                datasets: [{
                    data: [Moisture1, 100 - Moisture1],
                    backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)'
                    ],
                    borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)'
                    ],
                    borderWidth: 1
                }]
                },
                options: {
                rotation: 1 * Math.PI,
                circumference: 1 * Math.PI,
                cutoutPercentage: 90,
                tooltips: {
                    enabled: false
                },
                title: {
                    display: true,
                    text: Moisture1 + "%",
                    fontSize: 40
                },

                }
            });

            var ctx4 = document.getElementById('gauge6').getContext('2d');
            var gauge6 = new Chart(ctx4, {
                type: 'doughnut',
                data: {
                datasets: [{
                    data: [Moisture2, 100 - Moisture2],
                    backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)'
                    ],
                    borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)'
                    ],
                    borderWidth: 1
                }]
                },
                options: {
                rotation: 1 * Math.PI,
                circumference: 1 * Math.PI,
                cutoutPercentage: 90,
                tooltips: {
                    enabled: false
                },
                title: {
                    display: true,
                    text: Moisture2 + "%",
                    fontSize: 40
                },

                }
            });
            

        }
    </script>
</head>

<body>
    <!-- navbar -->
    <header class="all">
        <div class="logo">HUMI</div>
        <div class="hamburger">
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
        </div>
        <nav class="nav-bar">
            <ul>
                <li><a href="#one" class="active">HOME</a></li>
                <li><a href="#first">HUMI_01</a></li>
                <li><a href="#two">HUMI_02</a></li>
                <li><a href="#three">HUMI_03</a></li>
                <li><a href="#four">HUMI_04</a></li>
            </ul>
        </nav>
    </header>
    <script>
        hamburger = document.querySelector(".hamburger");
        hamburger.onclick = function(){
            navBar = document.querySelector(".nav-bar");
            navBar.classList.toggle("active");
        }
    </script>

    <!-- home -->
    <section id="home">
        <div class="main"></div>
    </section>

    <section id="humione">
        <div class="hunionebg"></div>
    </section>

    <!--- HUMI  --->
    <section id="one"></section>

    <!--- HUMI 01 --->
    <section id="first">
        
        <div class="row">
            <div style="width: 600px; height: 600px ; padding-top: 250px; ">
                <canvas id="gauge1"></canvas>
                <center><br><br><p class="text1">𝐓𝐄𝐌.</p></center>
            </div>
            <div style="width: 600px; height: 600px ; padding-top: 250px;" >
                <canvas id="gauge2"></canvas>
                <center><br><br><p class="text1">𝐇𝐔𝐌.</p></center>
            </div>
        </div>
    </section>

    <!--- HUMI 02 --->
    <section id="two">
        <div class="row">
            <div style="width: 600px; height: 600px ; padding-top: 250px;">
                <canvas id="gauge3"></canvas>
                <center><br><br><p class="text1">𝐓𝐄𝐌.</p></center>
            </div>
            <div style="width: 600px; height: 600px ; padding-top: 250px;">
                <canvas id="gauge4"></canvas>
                <center><br><br><p class="text1">𝐇𝐔𝐌.</p></center>
            </div>
        </div>
    </section>
     
    <!--- HUMI 03 --->
    <section id="three">
        <div class="row">
            <div style="width: 600px; height: 600px ; padding-top: 250px;">
                <canvas id="gauge5"></canvas>
                <center><br><br><p class="text2">𝐌𝐎𝐈𝐒𝐓𝐔𝐑𝐄</p></center>
            </div>
        </div> 
    </section>      

    <!--- HUMI 04 --->
    <section id="four">
        <div class="row">
            <div style="width: 600px; height: 600px ; padding-top: 250px;">
                <canvas id="gauge6"></canvas>
                <center><br><br><p class="text2">𝐌𝐎𝐈𝐒𝐓𝐔𝐑𝐄</p></center>
            </div>
        </div>  
    </section>        
        
</body>
</html>